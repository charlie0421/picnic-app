# 📱 이미지 성능 테스트 가이드

이 문서는 Picnic 앱의 이미지 최적화 시스템 성능을 테스트하는 방법을 설명합니다.

## 🎯 테스트 목적

- **기존 시스템** (`PicnicCachedNetworkImage`)과 **최적화 시스템** (`LazyImageWidget`) 간의 성능 비교
- 메모리 사용량, 로딩 시간, 성공률 등 핵심 지표 측정
- 실제 사용 환경에서의 성능 개선 효과 검증

## 🚀 테스트 실행 방법

### 1. 테스트 페이지 접근

#### 방법 1: 설정 메뉴를 통한 접근 (권장)
1. 앱 실행 후 **마이페이지** 이동
2. **설정** 메뉴 선택  
3. 맨 아래 **개발자 옵션** 섹션에서 **이미지 성능 테스트** 선택
   - 관리자 계정이거나 디버그 모드에서만 표시됩니다

#### 방법 2: 직접 네비게이션 (개발자용)
```dart
Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => const ImagePerformanceTestPage(),
  ),
);
```

### 2. 성능 테스트 실행

#### 기존 시스템 테스트
1. **"기존 시스템 테스트"** 버튼 클릭
2. 3초간 이미지 로딩 대기 (16개 이미지)
3. 자동으로 성능 지표 수집 및 표시

#### 최적화 시스템 테스트  
1. **"최적화 시스템 테스트"** 버튼 클릭
2. 3초간 이미지 로딩 대기 (16개 이미지)
3. 자동으로 성능 지표 수집 및 비교 결과 표시

## 📊 측정 지표

### 핵심 성능 지표
- **평균 로딩 시간** (ms): 이미지 로드 완료까지 소요 시간
- **메모리 사용량** (MB): 이미지 로딩 중 평균 메모리 사용량
- **성공률** (%): 성공적으로 로드된 이미지 비율
- **캐시 히트율** (%): 캐시에서 바로 로드된 이미지 비율

### 비교 결과
- **로딩 시간 개선율**: 기존 대비 얼마나 빨라졌는지
- **메모리 절약율**: 기존 대비 얼마나 메모리를 절약했는지
- **전체 개선 효과**: 종합적인 성능 개선 정도

## 🧪 테스트 시나리오

### 테스트 이미지 구성
- **작은 이미지** (150x150): 프로필, 아이콘 등 시뮬레이션
- **중간 이미지** (400x400): 피드 이미지 등 시뮬레이션  
- **큰 이미지** (800x600): 상세 페이지, 갤러리 등 시뮬레이션
- **다양한 비율**: 세로형, 가로형, 정사각형 등

### 테스트 환경
- **네트워크 상태**: WiFi, 4G, 3G 등 다양한 환경에서 테스트
- **메모리 상태**: 앱 시작 직후, 메모리 부족 상황 등
- **캐시 상태**: 캐시 비움 후, 캐시 있는 상태 등

## 📈 결과 해석

### 성공적인 최적화 지표
- **로딩 시간**: 30-50% 단축
- **메모리 사용량**: 30-50% 절약
- **성공률**: 95% 이상 유지
- **캐시 히트율**: 80% 이상

### 주의사항
- 첫 번째 테스트는 캐시가 비어있어 느릴 수 있음
- 네트워크 상태에 따라 결과가 달라질 수 있음
- 디바이스 성능에 따라 차이가 있을 수 있음

## 🔧 문제 해결

### 이미지가 로드되지 않는 경우
1. **네트워크 연결** 확인
2. **방화벽/프록시** 설정 확인
3. **picsum.photos** 접근 가능 여부 확인

### 성능 차이가 없는 경우
1. **캐시 초기화** 후 재테스트
2. **메모리 부족 상황** 시뮬레이션
3. **더 많은 이미지**로 테스트

### 앱이 크래시되는 경우
1. **메모리 부족** 가능성 확인
2. **디바이스 재시작** 후 재테스트
3. **로그 확인** 및 오류 분석

## 📝 테스트 로그

### 콘솔 로그 확인
```bash
# Flutter 로그 확인
flutter logs

# 성능 관련 로그 필터링
flutter logs | grep "ImagePerformance"
```

### 주요 로그 메시지
- `[ImagePerformanceBenchmark] 벤치마크 시작`: 테스트 시작
- `[ImagePerformanceBenchmark] 벤치마크 완료`: 테스트 완료
- `[ImagePerformanceBenchmark] 비교 결과`: 성능 비교 결과

## 🎯 기대 효과

### 사용자 경험 개선
- **빠른 이미지 로딩**: 스크롤 시 부드러운 경험
- **메모리 효율성**: 앱 안정성 향상
- **배터리 절약**: 효율적인 리소스 사용

### 개발자 이점
- **성능 모니터링**: 실시간 성능 추적
- **최적화 가이드**: 자동 최적화 제안
- **디버깅 도구**: 이미지 관련 문제 진단

## 📚 관련 문서

- [이미지 사용 패턴 분석](./image_usage_analysis.md)
- [LazyImageWidget 구현 가이드](../picnic_lib/lib/presentation/widgets/lazy_image_widget.dart)
- [ImagePerformanceBenchmark API](../picnic_lib/lib/core/utils/image_performance_benchmark.dart)

## 🤝 기여하기

테스트 결과나 개선 사항이 있다면:
1. 테스트 결과 스크린샷 첨부
2. 디바이스 정보 및 환경 명시
3. 개선 제안사항 작성
4. 이슈 또는 PR 생성

---

**참고**: 이 테스트는 개발/디버그 환경에서만 사용하며, 프로덕션 빌드에서는 제거됩니다. 