import json
import re

# 번역 매핑 - 영어 텍스트를 한국어로 번역
translations = {
    "Achievement": "성취",
    "Next available time to watch ads": "다음 광고 시청 가능 시간",
    "Anonymous": "익명",
    "Anonymous Mode": "익명 모드",
    "Picnic": "피크닉",
    "Candidate Application": "후보 신청",
    "Cancel": "취소",
    "Done": "완료",
    "Sign in": "로그인",
    "Confirm": "확인",
    "Save": "저장",
    "Star candy has been awarded.": "스타캔디가 지급되었습니다.",
    "Expiring Bonus Starchies 😢": "만료될 보너스 스타캔디 😢",
    "Bonus Star Candy earned in the current month will expire on the 15th of the following month.": "이번 달에 획득한 보너스 스타캔디는 다음 달 15일에 만료됩니다.",
    "When using Star Candy, Star Candy that is about to expire is prioritized.": "스타캔디 사용 시 만료 예정인 스타캔디가 우선적으로 사용됩니다.",
    "Bonuses will disappear the month after they are earned!": "보너스는 획득 후 다음 달에 사라집니다!",
    "Learn more": "더 알아보기",
    "Starchies Usage Policy": "스타캔디 사용 정책",
    "Comments": "댓글",
    "All": "전체",
    "Failed": "실패",
    "Try again": "다시 시도",
    "Success": "성공",
    "No data is available.": "데이터가 없습니다.",
    "No search results found.": "검색 결과가 없습니다.",
    "An error occurred during the search.": "검색 중 오류가 발생했습니다.",
    "Recent searches": "최근 검색",
    "Search results": "검색 결과",
    "🚫 Caution 🚫": "🚫 주의 🚫",
    "All ads have been exhausted. Please try again next time.": "모든 광고가 소진되었습니다. 다음에 다시 시도해주세요.",
    "Ads are loading.": "광고 로딩 중입니다.",
    "The ad is reloading. Please try again in a moment.": "광고를 다시 로드하고 있습니다. 잠시 후 다시 시도해주세요.",
    "Login required": "로그인이 필요합니다",
    "You need to login to use this feature. Would you like to login?": "이 기능을 사용하려면 로그인이 필요합니다. 로그인 하시겠습니까?",
    "Ads": "광고",
    "Boards": "게시판",
    "Gallery": "갤러리",
    "Home": "홈",
    "Libraries": "라이브러리",
    "Media": "미디어",
    "My": "마이",
    "PIC Charts": "픽차트",
    "Purchase": "구매",
    "Reward": "리워드",
    "Settings": "설정",
    "Shop": "상점",
    "Subscriptions": "구독",
    "Voting": "투표",
    "20 characters or less, excluding special characters.": "특수문자를 제외하고 20자 이하로 입력해주세요.",
    "Optional": "선택사항",
    "My Page": "마이페이지",
    "My profile": "내 프로필",
    "Create a post": "게시글 작성",
    "Privacy Policy": "개인정보 보호정책",
    "Preferences": "환경설정",
    "Terms of Use": "이용약관",
    "Vote": "투표",
    "Collecting votes": "투표 수집",
    "Checking for patches": "패치 확인 중",
    "Patch failed": "패치 실패",
    "Installing patch": "패치 설치 중",
    "Restarting app": "앱 재시작 중",
    "Delete": "삭제",
    "Anonymous posting": "익명 게시",
    "Close": "닫기",
    "Share": "공유",
    "Loading...": "로딩 중...",
    "Just now": "방금 전",
    "Update": "업데이트",
    "Network Error": "네트워크 오류",
    "Please check your internet connection.": "인터넷 연결을 확인해주세요.",
    "Error": "오류",
    "Loading ad": "광고 로딩 중",
    "Loading ad fail": "광고 로딩 실패",
    "Login with Apple": "Apple로 로그인",
    "Login with Google": "Google로 로그인",
    "Login with Kakao": "Kakao로 로그인",
    "Login with WeChat": "WeChat로 로그인",
    "Mission": "미션",
    "View ads": "광고 보기",
    "Watch": "시청",
    "Simple Login": "간편 로그인",
    "Find special moments at a picnic": "피크닉에서 특별한 순간들을 찾아보세요",
    "Log out": "로그아웃",
    "Help Center": "고객센터",
    "FAQ": "자주 묻는 질문",
    "Notice": "공지사항",
    "Withdrawal": "탈퇴",
    "No Artist": "아티스트 없음",
    "My Artists": "내 아티스트",
    "Notifications": "알림",
    "App info": "앱 정보",
    "Current version": "현재 버전",
    "Latest version": "최신 버전",
    "Language settings": "언어 설정",
    "Push notifications": "푸시 알림",
    "Event notifications": "이벤트 알림",
    "Events and happenings.": "이벤트 및 소식",
    "Delete cache memory": "캐시 메모리 삭제",
    "Manage storage": "저장소 관리",
    "Star Candy Pouch": "스타캔디 주머니",
    "Buy star candy": "스타캔디 구매",
    "Free charging stations": "무료 충전소",
    "MyArtist": "내 아티스트",
    "Find MyArtist": "내 아티스트 찾기",
    "Daily charts": "일간 차트",
    "Monthly Charts": "월간 차트",
    "Weekly charts": "주간 차트",
    "In Progress": "진행 중",
    "Closed": "종료됨",
    "Image Vote": "이미지 투표",
    "Upcoming": "예정됨",
    "days ago": "일 전",
    "hours ago": "시간 전",
    "minutes ago": "분 전",
    "Just a moment ago": "방금 전",
    "Make a report": "신고하기",
    "Unlimited rewards": "무제한 리워드",
    "Various rewards": "다양한 리워드",
    "Achievement Vote": "성취 투표",
    "Birthday": "생일",
    "Comeback Vote": "컴백 투표",
    "Debut": "데뷔",
    "Close the poll": "투표 종료",
    "Image": "이미지",
    "Rewards list": "리워드 목록",
    "Shining Vote": "샤이닝 투표",
    "Birthday polls": "생일 투표",
    "PIC voting": "픽 투표",
    "Until voting begins": "투표 시작까지",
    "Acceptance of the terms is complete.": "약관 동의가 완료되었습니다.",
    "An error occurred.": "오류가 발생했습니다.",
    "There are currently no active polls.": "현재 진행 중인 투표가 없습니다.",
    "There are currently no closed polls.": "현재 종료된 투표가 없습니다.",
    "There are currently no upcoming polls.": "현재 예정된 투표가 없습니다.",
    "Saving the image failed.": "이미지 저장에 실패했습니다.",
    "The image has been saved.": "이미지가 저장되었습니다.",
    "Want to report?": "신고하시겠습니까?",
    "The report is complete.": "신고가 완료되었습니다.",
    "Cache memory deletion is complete.": "캐시 메모리 삭제가 완료되었습니다.",
    "Nickname change failed.\\nPlease select a different nickname.": "닉네임 변경에 실패했습니다.\\n다른 닉네임을 선택해주세요.",
    "Your nickname has been successfully changed.": "닉네임이 성공적으로 변경되었습니다.",
    "Poll closed": "투표 종료",
    "This is an upcoming vote.": "예정된 투표입니다.",
    "My Information": "내 정보",
    "Manage comments": "댓글 관리",
    "My purchases": "내 구매내역",
    "Subscription information": "구독 정보",
    "Actions": "액션",
    "Answer": "답변",
    "Answered by": "답변자",
    "Attached Files": "첨부 파일",
    "Attachments": "첨부파일",
    "Inquiry content must be at least 10 characters": "문의 내용은 최소 10자 이상이어야 합니다",
    "Failed to submit inquiry:": "문의 제출에 실패했습니다:",
    "Create Inquiry": "문의 작성",
    "Inquiry has been successfully submitted": "문의가 성공적으로 제출되었습니다",
    "Delete this inquiry?\\nIt cannot be recovered after deletion.": "이 문의를 삭제하시겠습니까?\\n삭제 후에는 복구할 수 없습니다.",
    "Delete Inquiry": "문의 삭제",
    "Failed to delete": "삭제에 실패했습니다",
    "Inquiry has been deleted": "문의가 삭제되었습니다",
    "Inquiry Details": "문의 상세",
    "Download File": "파일 다운로드",
    "Edit": "편집",
    "File Attachment": "파일 첨부",
    "Select File": "파일 선택",
    "Document": "문서",
    "Other": "기타",
    "seconds": "초",
    "Share on Twitter": "트위터에 공유",
    "X app is missing.": "X 앱이 없습니다.",
    "Image sharing failed": "이미지 공유에 실패했습니다",
    "Shared image successfully": "이미지를 성공적으로 공유했습니다",
    "Views": "조회수",
    "No compatibility information": "궁합 정보 없음",
    "Create your first compatibility!": "첫 번째 궁합을 만들어보세요!",
    "Pinned": "고정됨",
    "Terms agreement required": "약관 동의가 필요합니다",
    "Retry": "다시 시도",
    "Purchase": "구매",
    "Purchase Confirmation": "구매 확인",
    "Would you like to purchase the following item?": "다음 항목을 구매하시겠습니까?",
    "Please try again in a moment.": "잠시 후 다시 시도해주세요.",
    "Purchase is in progress. Please wait a moment.": "구매가 진행 중입니다. 잠시 기다려주세요.",
    "Initializing. Please try again in a moment.": "초기화 중입니다. 잠시 후 다시 시도해주세요.",
    "Payment Amount": "결제 금액",
    "Purchase restoration completed.\\nPlease check your star candy balance.": "구매 복원이 완료되었습니다.\\n스타캔디 잔액을 확인해주세요.",
    "Purchase is in progress. Please try again after completion.": "구매가 진행 중입니다. 완료 후 다시 시도해주세요.",
    "Purchase processing is taking too long.\\nPlease try again later.": "구매 처리가 너무 오래 걸리고 있습니다.\\n나중에 다시 시도해주세요.",
    "This is the payment window for those who can't pay with the app.\\n Please copy the random ID in advance.\\n After copying it, click the button below to proceed with the payment.": "앱에서 결제할 수 없는 분들을 위한 결제 창입니다.\\n 랜덤 ID를 미리 복사해주세요.\\n 복사 후 아래 버튼을 클릭하여 결제를 진행하세요.",
    "Are you sure you want to leave?": "정말 탈퇴하시겠습니까?",
    "The unsubscribe was processed successfully.": "탈퇴가 성공적으로 처리되었습니다.",
    "If you cancel your membership, your star candy and account information on Picnic will be deleted immediately, and your existing information and data will not be restored when you rejoin.": "회원 탈퇴 시 피크닉의 스타캔디와 계정 정보가 즉시 삭제되며, 재가입 시 기존 정보와 데이터는 복원되지 않습니다.",
    "An error occurred during unsubscribe.": "탈퇴 중 오류가 발생했습니다.",
    "Let me think about this one more time.": "한 번 더 생각해보겠습니다.",
    "Unsubscribing": "탈퇴하기",
    "Star Candies to be deleted": "삭제될 스타캔디",
    "The purchase failed.": "구매에 실패했습니다.",
    "Your purchase is complete.": "구매가 완료되었습니다.",
    "Exhausted all ads": "모든 광고 소진",
    "Voting Failed": "투표 실패",
    "Your purchase has been canceled.": "구매가 취소되었습니다.",
    "There was an error with your purchase, please try again later.": "구매 중 오류가 발생했습니다. 나중에 다시 시도해주세요.",
    "Your purchase has been successfully completed.": "구매가 성공적으로 완료되었습니다.",
    "When you can rejoin if you cancel your membership now?": "지금 회원 탈퇴 시 언제 재가입할 수 있나요?",
    "An error occurred during login.": "로그인 중 오류가 발생했습니다.",
    "The membership information doesn't exist.": "회원 정보가 존재하지 않습니다.",
    "A member who has unsubscribed.": "탈퇴한 회원입니다.",
    "Check your network connection.": "네트워크 연결을 확인하세요.",
    "The request timed out.": "요청 시간이 초과되었습니다.",
    "Errors": "오류",
    "An unknown error occurred.": "알 수 없는 오류가 발생했습니다.",
    "We received an invalid response from the Apple server.\\nPlease try again.": "Apple 서버에서 잘못된 응답을 받았습니다.\\n다시 시도해주세요.",
    "Apple sign-in failed.\\nPlease try again.": "Apple 로그인에 실패했습니다.\\n다시 시도해주세요.",
    "Your login has been canceled.": "로그인이 취소되었습니다.",
    "The authentication token is invalid.\\nPlease try again.": "인증 토큰이 유효하지 않습니다.\\n다시 시도해주세요.",
    "An unknown error occurred during login.\\nPlease try again in a moment.": "로그인 중 알 수 없는 오류가 발생했습니다.\\n잠시 후 다시 시도해주세요.",
    "This login method is not supported.": "이 로그인 방법은 지원되지 않습니다.",
    "A Google Play Services error has occurred.\\nPlease update Google Play Services or restart your device.": "Google Play 서비스 오류가 발생했습니다.\\nGoogle Play 서비스를 업데이트하거나 기기를 재시작해주세요.",
    "I can't sign in with the KakaoTalk app.\\nTry signing in with your Kakao account.": "KakaoTalk 앱으로 로그인할 수 없습니다.\\nKakao 계정으로 로그인해보세요.",
    "Account": "계정",
    "Etc": "기타",
    "General": "일반",
    "Payment": "결제",
    "Service": "서비스",
    "More": "더보기",
    "Input": "입력",
    "Recent": "최근",
    "AI Photos": "AI 사진",
    "Write a comment": "댓글 작성",
    "Leave a comment.": "댓글을 남겨주세요.",
    "Korean Pick": "한국 픽",
    "Global Pick": "글로벌 픽",
    "Asia Pick": "아시아 픽",
    "K-POP": "K-POP",
    "K-MUSICAL": "K-뮤지컬",
    "Be the first to comment!": "첫 번째 댓글을 남겨주세요!",
    "Bonuses": "보너스",
    "Accept": "동의",
    "Non-Consent": "비동의",
    "Mission and charge": "미션 및 충전",
    "Charging": "충전",
    "Save your ballot": "투표용지 저장",
    "Viewing and charging for ads": "광고 시청 및 충전",
    "The Artist Asks You!": "아티스트가 당신에게 묻습니다!",
    "Artist Gallery": "아티스트 갤러리",
    "Artist recommendations": "아티스트 추천",
    "Full Use": "전체 사용",
    "Current language": "현재 언어",
    "Chance to win a random image": "랜덤 이미지 획득 기회",
    "Oldest": "오래된 순",
    "Newest": "최신 순",
    "Find more artists": "더 많은 아티스트 찾기",
    "Articles": "기사",
    "Chat": "채팅",
    "Save the library": "라이브러리 저장",
    "PIC": "픽",
    "Don't view for 7 days": "7일 동안 보지 않기",
    "More comments": "더 많은 댓글",
    "Replying to a reply": "답글에 답글",
    "Retrying": "재시도",
    "Location": "위치",
    "Overview": "개요",
    "Size": "크기",
    "Accept the terms": "약관 동의",
    "You have exceeded the number of times you can watch ads for this button.": "이 버튼의 광고 시청 횟수를 초과했습니다.",
    "Get Star Candy from Ads": "광고에서 스타캔디 획득",
    "per hour": "시간당",
    "per day": "일일",
    "Failed to load ad. Please try again.": "광고 로드에 실패했습니다. 다시 시도해주세요.",
    "Ad loading timed out. Please try again.": "광고 로딩 시간이 초과되었습니다. 다시 시도해주세요.",
    "When the next ad will be available.": "다음 광고 시청 가능 시간",
    "Failed to get reward. Please try again.": "리워드 획득에 실패했습니다. 다시 시도해주세요.",
    "SDK initialization failed. Please try again.": "SDK 초기화에 실패했습니다. 다시 시도해주세요.",
    "Failed to show ad. Please try again.": "광고 표시에 실패했습니다. 다시 시도해주세요.",
    "Consent to the collection and use of personal information": "개인정보 수집 및 이용 동의",
    "Accept the Terms of Use": "이용약관 동의",
    "Add a new album": "새 앨범 추가",
    "No ads": "광고 없음",
    "You don't have any artists bookmarked yet!": "아직 북마크한 아티스트가 없습니다!",
    "Pic Chart": "픽 차트",
    "Crop an image": "이미지 자르기",
    "Initializing camera...": "카메라 초기화 중...",
    "Save to Gallery": "갤러리에 저장",
    "Compositing an image...": "이미지 합성 중...",
    "Album name": "앨범 이름",
    "Please enter a nickname.": "닉네임을 입력해주세요.",
    "The image has been saved.": "이미지가 저장되었습니다.",
    "Get Star Candy from Missions": "미션에서 스타캔디 획득",
    "Go to the Artist Gallery": "아티스트 갤러리로 이동",
    "Charges": "충전",
    "Membership history": "멤버십 내역",
    "StarCandy Voting History": "스타캔디 투표 내역",
    "Please sign in": "로그인해주세요",
    "Don't have an account? You'll be automatically signed up with your social login above": "계정이 없으신가요? 위의 소셜 로그인으로 자동 가입됩니다",
    "An error occurred while performing the operation.": "작업 수행 중 오류가 발생했습니다.",
    "Please select an artist": "아티스트를 선택해주세요",
    "An error occurred while parsing the content.": "콘텐츠 파싱 중 오류가 발생했습니다.",
    "An error occurred while deleting the post.": "게시글 삭제 중 오류가 발생했습니다.",
    "Invalid data.": "유효하지 않은 데이터입니다.",
    "There was an error loading the comment.": "댓글 로드 중 오류가 발생했습니다.",
    "An error occurred while loading the page.": "페이지 로드 중 오류가 발생했습니다.",
    "Ads fail to load": "광고 로드 실패",
    "No Search Results": "검색 결과 없음",
    "Update required": "업데이트 필요",
    "Count": "개수",
    "Title must be at least 5 characters": "제목은 최소 5자 이상이어야 합니다",
    "File Upload": "파일 업로드",
    "Upload Complete": "업로드 완료",
    "Upload Waiting": "업로드 대기",
    "Uploading...": "업로드 중...",
    "Please check your input.": "입력을 확인해주세요.",
    "Error occurred while loading": "로딩 중 오류가 발생했습니다",
    "Mark as Resolved": "해결됨으로 표시",
    "Failed to change status": "상태 변경에 실패했습니다",
    "Changed to resolved": "해결됨으로 변경되었습니다",
    "No answer yet": "아직 답변 없음",
    "Pull to refresh": "새로고침하려면 당겨주세요",
    "Information you enter will be collected and used for inquiry processing. Please check our privacy policy for details.": "입력하신 정보는 문의 처리를 위해 수집 및 사용됩니다. 자세한 내용은 개인정보 보호정책을 확인해주세요.",
    "Question": "질문",
    "• Maximum 10MB upload allowed\\n• Supported formats: Images (jpg, png, gif), Documents (pdf, doc, txt)": "• 최대 10MB 업로드 가능\\n• 지원 형식: 이미지 (jpg, png, gif), 문서 (pdf, doc, txt)",
    "File Uploading...": "파일 업로드 중...",
    "Request status": "요청 상태",
    "Save the results": "결과 저장",
    "Share your results": "결과 공유",
    "Voted!": "투표했습니다!",
    "To prevent traffic surges, total usage is limited to 10,000 at a time.": "트래픽 급증을 방지하기 위해 총 사용량은 한 번에 10,000개로 제한됩니다.",
    "Only up to 10,000 is allowed.": "최대 10,000개만 허용됩니다.",
    "Get 1 bonus star candy for every 100 votes and share!": "100표마다 보너스 스타캔디 1개를 획득하고 공유하세요!",
    "An update is required.": "업데이트가 필요합니다.",
    "You need to update to a new version": "새 버전으로 업데이트해야 합니다",
    "A new version": "새 버전",
    "is available.": "이 사용 가능합니다.",
    "I can't open the app store.": "앱 스토어를 열 수 없습니다.",
    "Get it on Google Play": "Google Play에서 다운로드",
    "Direct APK Download": "직접 APK 다운로드",
    "Coming Soon": "곧 출시",
    "Voting and media platform for K-Pop artists": "K-Pop 아티스트를 위한 투표 및 미디어 플랫폼",
    "Media Gallery": "미디어 갤러리",
    "Reward System": "리워드 시스템",
    "Artist Voting": "아티스트 투표",
    "Picnic Key Features": "피크닉 주요 기능",
    "Download on App Store": "App Store에서 다운로드",
    "Copied!": "복사됨!",
    "Copy Link": "링크 복사",
    "Download Picnic App": "피크닉 앱 다운로드",
    "Scan the QR code with your smartphone": "스마트폰으로 QR 코드를 스캔하세요",
    "Quick Download with QR Code": "QR 코드로 빠른 다운로드",
    "Download the Picnic app now and support your favorite K-Pop artists!": "지금 피크닉 앱을 다운로드하고 좋아하는 K-Pop 아티스트를 응원하세요!",
}

def fix_korean_arb_file(file_path):
    """한국어 ARB 파일의 (번역 필요) 텍스트를 수정합니다."""
    
    with open(file_path, 'r', encoding='utf-8') as f:
        content = f.read()
    
    # 각 번역 매핑을 적용
    for english_text, korean_text in translations.items():
        # "(번역 필요)" 패턴을 찾아서 대체
        pattern = re.escape(english_text) + r' \(번역 필요\)'
        content = re.sub(pattern, korean_text, content)
    
    # 남은 "(번역 필요)" 텍스트들을 처리
    # 영어 텍스트 + " (번역 필요)" 형태를 찾아서 영어 텍스트만 남김
    content = re.sub(r'([^"]*) \(번역 필요\)', r'\1', content)
    
    # 특별한 경우들 처리
    special_cases = {
        '"app_name": "Picnic"': '"app_name": "피크닉"',
        '"comments": "Comments"': '"comments": "댓글"',
        '"cancel": "Cancel"': '"cancel": "취소"',
        '"confirm": "Confirm"': '"confirm": "확인"',
        '"loading": "Loading..."': '"loading": "로딩 중..."',
        '"just_now": "Just now"': '"just_now": "방금 전"',
        '"update": "Update"': '"update": "업데이트"',
        '"ban_title": "계정 정지"': '"ban_title": "계정 정지"',
        '"ban_message": "커뮤니티 가이드라인 위반으로 인해 계정이 일시적으로 정지되었습니다."': '"ban_message": "커뮤니티 가이드라인 위반으로 인해 계정이 일시적으로 정지되었습니다."',
        '"ban_contact": "문의사항이 있으시면 고객센터로 연락주세요."': '"ban_contact": "문의사항이 있으시면 고객센터로 연락주세요."',
        '"network_error_title": "Network Error"': '"network_error_title": "네트워크 오류"',
        '"network_error_message": "Please check your internet connection."': '"network_error_message": "인터넷 연결을 확인해주세요."',
        '"notice_pinned": "Pinned"': '"notice_pinned": "고정됨"',
        '"message_agreement_fail": "Terms agreement required"': '"message_agreement_fail": "약관 동의가 필요합니다"',
        '"title_dialog_error": "Error"': '"title_dialog_error": "오류"',
        '"update_required_message": "앱을 업데이트해야 합니다"': '"update_required_message": "앱을 업데이트해야 합니다"',
    }
    
    for old_text, new_text in special_cases.items():
        content = content.replace(old_text, new_text)
    
    # 파일에 저장
    with open(file_path, 'w', encoding='utf-8') as f:
        f.write(content)
    
    print(f"한국어 ARB 파일이 수정되었습니다: {file_path}")

if __name__ == "__main__":
    # 한국어 ARB 파일 경로
    korean_arb_path = "picnic_lib/lib/l10n/app_ko.arb"
    
    # 수정 실행
    fix_korean_arb_file(korean_arb_path) 